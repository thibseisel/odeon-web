<section class="playlist-detail" *ngIf="playlist$ | async as playlist">

  <mat-card class="playlist-detail__card playlist-detail__info">
    <mat-card-header>
      <mat-card-title>{{ playlist.name }}</mat-card-title>
      <mat-card-subtitle>{{ playlist.description }}</mat-card-subtitle>
    </mat-card-header>
    <a [href]="playlist.link" target="_blank" mat-flat-button color="primary">View on Spotify</a>
  </mat-card>

  <div class="playlist-detail__tracks">
    <mat-card class="playlist-detail__card">
      <mat-card-title>{{ playlist.tracks.length }} Tracks</mat-card-title>
      <mat-card-content>
        <mat-list>
          <mat-list-item *ngFor="let track of playlist.tracks; last as last">
            <img mat-list-avatar [src]="track.artworkUrl" />
            <h3 mat-line>{{ track.name }}</h3>
            <p mat-line>{{ track.artist }}</p>
            <mat-divider *ngIf="!last"></mat-divider>
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>
  </div>

  <div class=" playlist-detail__stats">
    <mat-card class="playlist-detail__card">
      <mat-card-title>Tone</mat-card-title>

      <mat-card-content>
        <div class="chart-container">
          <div class="chart chart--white-axis">
            <ngx-charts-bar-vertical
              [view]="[480, 320]"
              [results]="pitchChartData$ | async"
              xAxis="true"
              showXAxisLabel="true"
              xAxisLabel="Key"
              rotateXAxisTicks="false"
              tooltipDisabled="true"
              scheme="ocean">
            </ngx-charts-bar-vertical>
          </div>

          <div class="chart">
            <ngx-charts-pie-chart
              [view]="[320, 320]"
              [results]="modePieData$ | async"
              [doughnut]="true"
              [legend]="true"
              legendTitle="Modality"
              legendPosition="below"
              scheme="ocean">
            </ngx-charts-pie-chart>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="playlist-detail__card">
      <mat-card-title>Rhythm</mat-card-title>

      <mat-card-content>
        <div class="chart-container">
          <div class="chart chart--white-axis">
            <ngx-charts-bar-vertical
              [view]="[640, 320]"
              [results]="tempoChartData$ | async"
              xAxis="true"
              showXAxisLabel="true"
              xAxisLabel="Tempo"
              scheme="ocean">
            </ngx-charts-bar-vertical>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="playlist-detail__card">
      <mat-card-title>Emotion</mat-card-title>

      <mat-card-content>
        <div class="chart-container">
          <div class="chart chart--white-axis">
            <ngx-charts-bar-vertical
              [view]="[640, 320]"
              [results]="energyChartData$ | async"
              xAxis="true"
              showXAxisLabel="true"
              xAxisLabel="Energy"
              scheme="ocean">
            </ngx-charts-bar-vertical>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart chart--white-axis">
            <ngx-charts-bar-vertical
              [view]="[640, 320]"
              [results]="danceabilityChartData$ | async"
              xAxis="true"
              showXAxisLabel="true"
              xAxisLabel="Danceability"
              scheme="ocean">
            </ngx-charts-bar-vertical>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart chart--white-axis">
            <ngx-charts-bar-vertical
              [view]="[640, 320]"
              [results]="valenceChartData$ | async"
              showXAxisLabel="true"
              xAxis="true"
              xAxisLabel="Valence"
              scheme="ocean">
            </ngx-charts-bar-vertical>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="playlist-detail__card">
      <mat-card-title>Atmosphere</mat-card-title>

      <mat-card-content>
        <div class="chart-container">
          <div class="chart chart--white-axis">
            <ngx-charts-bar-vertical
              [view]="[640, 320]"
              [results]="acousticnessChartData$ | async"
              xAxis="true"
              showXAxisLabel="true"
              xAxisLabel="Acousticness"
              scheme="ocean">
            </ngx-charts-bar-vertical>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart chart--white-axis">
            <ngx-charts-bar-vertical
              [view]="[640, 320]"
              [results]="livenessChartData$ | async"
              xAxis="true"
              showXAxisLabel="true"
              xAxisLabel="Liveness"
              scheme="ocean">
            </ngx-charts-bar-vertical>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart chart--white-axis">
            <ngx-charts-bar-vertical
              [view]="[640, 320]"
              [results]="instrumentalnessChartData$ | async"
              xAxis="true"
              showXAxisLabel="true"
              xAxisLabel="Instrumentalness"
              scheme="ocean">
            </ngx-charts-bar-vertical>
          </div>
        </div>

        <div class="chart-container">
          <div class="chart chart--white-axis">
            <ngx-charts-bar-vertical
              [view]="[640, 320]"
              [results]="speechinessChartData$ | async"
              xAxis="true"
              showXAxisLabel="true"
              xAxisLabel="Speechiness"
              scheme="ocean">
            </ngx-charts-bar-vertical>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

</section>
